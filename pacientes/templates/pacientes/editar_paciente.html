{% extends 'base.html' %}
{% load static %}
{% load form_filters %}

{% block content %}
<div class="container my-4">
    <h2 class="mb-4">ü©∫ Ficha M√©dica - Editar Paciente</h2>

    <div class="card shadow-lg rounded p-4">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label><strong>Nombre:</strong></label>
                    {{ form.nombre|add_class:"form-control" }}
                </div>
                <div class="col-md-6 mb-3">
                    <label><strong>Documento:</strong></label>
                    {{ form.documento|add_class:"form-control" }}
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label><strong>Tel√©fono:</strong></label>
                    {{ form.telefono|add_class:"form-control" }}
                </div>
                <div class="col-md-6 mb-3">
                    <label><strong>Correo:</strong></label>
                    {{ form.correo|add_class:"form-control" }}
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label><strong>R√©gimen de afiliaci√≥n:</strong></label>
                    {{ form.regimen|add_class:"form-select" }}
                </div>
                <div class="col-md-6 mb-3" id="nivel-container">
                    <label><strong>Nivel de ingresos:</strong></label>
                    {{ form.nivel|add_class:"form-select" }}
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label><strong>Direcci√≥n:</strong></label>
                    {{ form.direccion|add_class:"form-control" }}
                </div>
                <div class="col-md-6 mb-3">
                    <label><strong>Departamento de residencia:</strong></label>
                    {{ form.departamentoResidencia|add_class:"form-select" }}
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label><strong>Municipio de residencia:</strong></label>
                    {{ form.codMunicipioResidencia|add_class:"form-select" }}
                </div>
                <div class="col-md-6 mb-3">
                    <label><strong>Pa√≠s de residencia:</strong></label>
                    {{ form.codPaisResidencia|add_class:"form-select" }}
                </div>
            </div>

            <!-- Botones -->
            <div class="text-end mt-4">
                <button type="submit" class="btn btn-primary">üíæ Guardar Cambios</button>
                <a href="{% url 'listado_pacientes' %}" class="btn btn-secondary">‚Ü© Volver</a>
            </div>
        </form>
    </div>
</div>

<!-- Script para mostrar/ocultar nivel seg√∫n r√©gimen -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const regimenSelect = document.getElementById("id_regimen");
    const nivelContainer = document.getElementById("nivel-container");

    function toggleNivel() {
        if (regimenSelect.value === 'C') {
            nivelContainer.style.display = 'block';
        } else {
            nivelContainer.style.display = 'none';
        }
    }

    regimenSelect.addEventListener("change", toggleNivel);
    toggleNivel();  // Ejecutar al cargar la p√°gina
});
</script>
{% endblock %}
